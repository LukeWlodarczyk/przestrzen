---
import { tw } from "@utils/index.ts";

interface OfficeCard {
  name: string;
  href: string;
  address: string;
  phone: string;
  email: string;
  website?: string;
}

interface Props extends OfficeCard {
  className?: string;
  isLink?: boolean;
}

const {
  className,
  isLink = true,
  name,
  href,
  address,
  phone,
  email,
  website,
} = Astro.props;

const baseClasses = tw(
  "group @container noise-6 relative rounded-2xl bg-deep-green p-(--space-m) outline-offset-2 has-focus-visible:outline-2 has-focus-visible:outline-deep-green",
);

const hasWebsite = Boolean(website);
---

<article class:list={tw(baseClasses, className)}>
  <div class="flex flex-col @lg:flex-row @lg:justify-around">
    {
      isLink && (
        <a
          aria-label={`Dowiedz się więcej o ${name}`}
          class="peer absolute inset-0 z-1 h-full w-full"
          href={href}
        />
      )
    }
    <header
      class="flex flex-col gap-(--space-3xs) @lg:justify-center @lg:gap-(--space-2xs)"
    >
      <h3
        class:list={tw(
          "w-fit overflow-hidden text-lg tracking-wide text-ellipsis whitespace-nowrap text-warm-yellow",
          isLink && "group-hover:shine peer-focus:shine",
        )}
      >
        {name}
      </h3>
      <p
        class="overflow-hidden font-extralight text-ellipsis whitespace-nowrap text-sand-beige"
      >
        {address}
      </p>
    </header>

    <dl
      class="relative mt-(--space-s-m) text-sm font-extralight text-warm-white @lg:mt-0"
    >
      <dt class="sr-only">Telefon</dt>
      <dd class="flex">
        <a
          class="z-2 inline-block w-fit truncate py-[2px] outline-none hover:text-warm-yellow hover:underline focus:text-warm-yellow focus:underline"
          href={`tel:${phone}`}
        >
          <span class="mr-(--space-3xs) hidden @3xs:inline-block">📞</span>
          {phone}
        </a>
      </dd>

      <dt class="sr-only">Email</dt>
      <dd class="flex">
        <a
          class="z-2 inline-block w-fit truncate py-[2px] outline-none hover:text-warm-yellow hover:underline focus:text-warm-yellow focus:underline"
          href={`mailto:${email}`}
        >
          <span class="mr-(--space-3xs) hidden @3xs:inline-block">✉️</span>
          {email}
        </a>
      </dd>

      {
        hasWebsite && (
          <>
            <dt class="sr-only">Strona internetowa</dt>
            <dd class="flex">
              <a
                class="z-2 inline-block w-fit truncate py-[2px] outline-none hover:text-warm-yellow hover:underline focus:text-warm-yellow focus:underline"
                href={`https://${website}`}
                rel="noopener"
                target="_blank"
              >
                <span class="mr-(--space-3xs) hidden @3xs:inline-block">
                  🌐
                </span>
                {website}
              </a>
            </dd>
          </>
        )
      }
    </dl>
  </div>
</article>
