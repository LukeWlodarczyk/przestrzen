---
import { tw } from "@utils/index.ts";

import Heading from "@components/typography/Heading.astro";
import Paragraph from "@components/typography/Paragraph.astro";

import TimeToRead from "./TimeToRead.astro";
import PublishDate from "./PublishDate.astro";

interface PostCard {
  href: string;
  title: string;
  description: string;
  timeToRead: number;
  date: Date;
}

interface Props extends PostCard {
  className?: string;
}

const { className, href, title, description, date, timeToRead } = Astro.props;

const baseClasses = tw(
  "group @container noise-30 w-full rounded-2xl bg-sand-beige/80 p-(--space-s-m) outline-offset-2 outline-dark-beige transition-colors hover:cursor-pointer hover:bg-dark-beige/30 has-focus-visible:bg-dark-beige/30 has-focus-visible:outline-2 @xl:p-(--space-m-l)",
);

const classList = tw(baseClasses, className);
---

<article class:list={classList}>
  <a
    aria-label=`Zobacz wpis: ${title}`
    class="flex flex-col outline-none"
    href={href}
  >
    <div class="mb-(--space-xs) flex justify-between">
      <TimeToRead minutes={timeToRead} />
      <PublishDate date={date} />
    </div>

    <Heading
      className="line-clamp-2 text-base font-normal tracking-normal text-balance text-dark-teal transition-colors group-hover:text-deep-green group-has-focus-visible:text-deep-green @xl:text-left"
      level={3}
    >
      {title}
    </Heading>
    <Paragraph
      className="mt-(--space-2xs) line-clamp-4 text-justify text-sm text-pretty"
    >
      {description}
    </Paragraph>
  </a>
</article>
